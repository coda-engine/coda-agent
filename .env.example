# ============================================
# Coda Agent - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# ============================================
# Environment
# ============================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql://coda:coda_password@postgres:5432/coda_agent
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://redis:6379/0
REDIS_CACHE_TTL=3600

# ============================================
# MCP Server Configuration
# ============================================
# URL of your MCP server exposing solver/analytics tools
MCP_SERVER_URL=http://localhost:8080
MCP_TIMEOUT=30

# ============================================
# LLM Provider API Keys
# ============================================
# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=

# Anthropic
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google AI
GOOGLE_API_KEY=your-google-api-key-here

# Azure OpenAI
AZURE_OPENAI_API_KEY=your-azure-openai-key-here
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# ============================================
# Hosted Model Configuration (Optional)
# ============================================
# Enable if you want to provide hosted models
HOSTED_MODEL_ENABLED=false
HOSTED_MODEL_ENDPOINT=http://your-hosted-model-endpoint
HOSTED_MODEL_API_KEY=your-hosted-model-key

# ============================================
# Security Configuration
# ============================================
# IMPORTANT: Change these in production!
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=15
REFRESH_TOKEN_EXPIRATION_DAYS=7

# Encryption key for storing API keys (32 bytes base64 encoded)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-encryption-key-change-in-production

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================
# Observability Configuration
# ============================================
# Jaeger
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
OTEL_SERVICE_NAME=coda-agent-backend

# Prometheus
PROMETHEUS_ENDPOINT=http://prometheus:9090

# Grafana
GRAFANA_PASSWORD=admin

# ============================================
# Rate Limiting & Quotas
# ============================================
# Default quotas for free tier
DEFAULT_TOKEN_QUOTA=100000
DEFAULT_REQUEST_QUOTA=1000
RATE_LIMIT_PER_MINUTE=60

# ============================================
# Feature Flags
# ============================================
ENABLE_ANALYTICS=true
ENABLE_TRACING=true
ENABLE_CHAIN_OF_THOUGHT=true
ENABLE_TOOL_EVALUATION=true
ENABLE_FILE_ATTACHMENTS=false
ENABLE_SESSION_SHARING=false

# ============================================
# Storage Configuration
# ============================================
# For file attachments (S3 or local)
STORAGE_BACKEND=local
STORAGE_LOCAL_PATH=/app/uploads
MAX_FILE_SIZE_MB=10

# S3 Configuration (if using S3)
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET=coda-agent-uploads
# AWS_REGION=us-east-1

# ============================================
# Email Configuration (Optional)
# ============================================
# For password reset, notifications, etc.
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@coda.com

# ============================================
# OAuth Configuration (Optional)
# ============================================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ============================================
# Application Configuration
# ============================================
# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# Backend URL
BACKEND_URL=http://localhost:8000

# Session configuration
SESSION_TIMEOUT_MINUTES=60
MAX_SESSIONS_PER_USER=50

# Context management
MAX_CONTEXT_TOKENS=8000
CONTEXT_SUMMARIZATION_THRESHOLD=0.5

# Tool configuration
MAX_TOOL_EXECUTION_TIME_SECONDS=30
MAX_TOOL_RETRIES=3

# ============================================
# Development Configuration
# ============================================
# Hot reload
RELOAD=true

# Mock MCP server (for development without real MCP server)
USE_MOCK_MCP=false

# Seed database with test data
SEED_DATABASE=false

# ============================================
# Production Configuration
# ============================================
# Set these when deploying to production

# Database (use managed service in production)
# DATABASE_URL=postgresql://user:password@production-db:5432/coda_agent

# Redis (use managed service in production)
# REDIS_URL=redis://production-redis:6379/0

# Enable SSL
# SSL_ENABLED=true
# SSL_CERT_PATH=/etc/ssl/certs/cert.pem
# SSL_KEY_PATH=/etc/ssl/private/key.pem

# Sentry (error tracking)
# SENTRY_DSN=https://your-sentry-dsn

# ============================================
# Monitoring & Alerting
# ============================================
# Slack webhook for alerts
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# PagerDuty integration key
# PAGERDUTY_INTEGRATION_KEY=your-pagerduty-key

# ============================================
# Notes
# ============================================
# 1. Never commit this file with real credentials
# 2. Use environment-specific .env files (.env.dev, .env.staging, .env.prod)
# 3. In production, use secrets management (AWS Secrets Manager, HashiCorp Vault, etc.)
# 4. Rotate secrets regularly
# 5. Use strong, unique passwords for all services
